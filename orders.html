<!DOCTYPE html>
<html lang="en" >
	<head>
		<meta charset="UTF-8">
		<title>Your Orders</title>
		
		<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons'>
		<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/vuetify@1.5.14/dist/vuetify.min.css'>
		
		<link rel="stylesheet" href="css/style.css" type="text/css">
		<link rel="stylesheet" href="css/orders.css" type="text/css">
		<link rel="stylesheet" href="css/footer.css" type="text/css">
		
		<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
		<script src='https://cdn.jsdelivr.net/npm/babel-polyfill/dist/polyfill.min.js'></script>
		<script src='https://cdn.jsdelivr.net/npm/vue/dist/vue.js'></script>
		<script src='https://cdn.jsdelivr.net/npm/vuetify@1.5.14/dist/vuetify.min.js'></script>
		
		<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jstimezonedetect/1.0.4/jstz.min.js"></script>
        
        <script src="js/common.js"></script>

	</head>
	<body>
	    <div class="content">
		<div id="logo"><a href="/" style="display:none;">He!pHog</a></div>
		<div id="loading-animation" style=" display:none">
			<ul id="navigation">
    		    <li id="sign-out"><a href="/">Sign Out</a></li>
    		    <li id="settings"><a href="settings">Settings</a></li>
    			<li id="sign-in-nav"><a href="signin">Login</a></li>
    			<li id="register-nav"><a href="registration">Register</a></li>
    			<li id="apply"><a href="quickapply">Apply</a></li>
    			<li id="track-order"><a href="tracking">Track Order</a></li>
    			<li id="orders"><a href="orders">Orders</a></li>
    			<li id="provider"><a href="provider">Provider Portal</a></li>
    			<li id="contact"><a href="contact">Contact Us</a></li>
    			<li id="about"><a href="about">About</a></li>
    		</ul>
		</div>
		<br>
		<br>
		<br>
		<br>
		<!--<div class="title" style="display:none;">-->
		<!--	<h1>Orders</h1>-->
		<!--	<h2>If you have any other questions or concerns about your order, please <a href="contact">contact us</a></h2>-->
		<!--</div>-->
		<br>
		<br>
		<br>
		<div id="app" style="display:none;">
			<v-app id="inspire">
				<div id="wrapper">
					<v-toolbar flat color="white">
						<v-toolbar-title style="font-family: 'Raleway', sans-serif;">Order History</v-toolbar-title>
						<v-spacer></v-spacer>
						<d style="margin-right:20px;color:#a7a7a7;font-family: 'Raleway', sans-serif;">click on the row for more information</d>
					</v-toolbar>
					<v-data-table
						:headers="headers"
						:items="orders"
						:expand="expand"
						item-key="number"
						>
					    
						<template v-slot:items="props">

							<tr>
								<td style='font-weight:400;' @click="props.expanded = !props.expanded">{{ props.item.number }}</td>
								<td class="text-xs-left" style='font-weight:400;' @click="props.expanded = !props.expanded">{{ props.item.name }}</td>
								<td class="text-xs-left" style='font-weight:400;' @click="props.expanded = !props.expanded">{{ props.item.date }}</td>
								<td class="text-xs-left" style='font-weight:400;' @click="props.expanded = !props.expanded">{{ props.item.time }}</td>
								<td class="text-xs-left" style='font-weight:400;' @click="props.expanded = !props.expanded">{{ props.item.provider }}</td>
								<td class="text-xs-left" style='font-weight:400;' @click="props.expanded = !props.expanded">${{ props.item.amount }}{{ props.item.labor }}</td>
								<td class="text-xs-left" style='font-weight:300;'>{{ (props.item.status == 'pe' ? "Pending" : props.item.status == 'cl' ? "Claimed" : props.item.status == 'st' ? "In Progress" : props.item.status == 'en' ? "Ended" : props.item.status == 'mc' ? "Completed" : props.item.status == 're' ? "Refunded" : props.item.status == 'pd' ? "Paid" : props.item.status == 'di' ? "Disputed" : "Cancelled") }}</td>
								<td v-if="props.item.status == 'mc' && props.item.rating == '0'" class="text-xs-left" style='font-weight:400;'>
									<v-btn @click="status(); selectedItem = props.item; " class="dark">Review Order</v-btn>
									<transition name="fade" appear>
										<div class="modal-overlay" 
											v-if="showModal" 
											@click="showModal = false"></div>
									</transition>
									<transition name="pop" appear>
										<div class="modal" 
											role="dialog" 
											v-if="showModal"
											>
											<h1>Confirm Completion</h1>
											<p style="font-size: 16px;">If your order has been successfully completed please review {{ selectedItem.provider }}'s performance as your {{ selectedItem.name }} provider and mark the order completed. If you have any questions/concerns please contact us.</p>
											
                                            <div class="rating rating2">
                                            	<a @click="markCompleted(selectedItem, 1)" href="#5" title="Give 5 stars">★</a>
                                            	<a @click="markCompleted(selectedItem, 2)" href="#4" title="Give 4 stars">★</a>
                                            	<a @click="markCompleted(selectedItem, 3)" href="#3" title="Give 3 stars">★</a>
                                            	<a @click="markCompleted(selectedItem, 4)" href="#2" title="Give 2 stars">★</a>
                                            	<a @click="markCompleted(selectedItem, 5)" href="#1" title="Give 1 star">★</a>
                                            </div>
											
											<br><br>
											<!--<v-btn @click="showModal = false" class="Submit">Mark Completed</v-btn>-->
											<v-btn @click="markCompleted(selectedItem)" class="Submit" style="color:#1ecd27;">Mark Completed</v-btn>
											<v-btn @click="markIncompleted(selectedItem)" class="Submit" style="color:red;">Dispute Order</v-btn>
											<div id="root" class="container">
                                            	<loading-modal :visible="isLoading"></loading-modal>
                                            		
                                            	<input type="checkbox" name="" id="checkbox" v-model="isLoading" class="toggle">
                                            	
                                            </div>
										</div>
									</transition>
								</td>
								<td v-else-if="props.item.status  == 'pe' || props.item.status == 'cl'" class="text-xs-left" style='font-weight:300;'>
								    <v-btn @click="status2(); selectedItem = props.item" class="dark">Cancel Order</v-btn>
									<transition name="fade" appear>
										<div class="modal-overlay" 
											v-if="showCancel" 
											@click="showCancel = false"></div>
									</transition>
									<transition name="pop" appear>
										<div class="modal" 
											role="dialog" 
											v-if="showCancel"
											>
											<h1>Confirm Cancellation</h1>
											<p style="font-size: 16px;">{{ selectedItem.warning }}Are you sure you would like to cancel?</p>
											<br><br>
											<v-btn @click="cancel(selectedItem)" class="Submit" style="color:red;">Cancel Order</v-btn>
											<v-btn @click="undo2()" class="Submit" >Exit</v-btn>
										</div>
									</transition>
								</td>
								<td v-else class="text-xs-left" style='font-weight:300;'>
								    None
								</td>
							</tr>
						</template>
						<template v-slot:expand="props" style="font-weight: 500">
							<v-data-table
								:items="[props.item]"
								:expand="expand"
								item-key="name"
								hide-actions
								>
								<template v-slot:headers="props">
								</template>
								<template v-slot:items="props">
							    <tr style="height: 95px;">
									<td width="10%" style='font-weight:300;'></td>
									<td width="15%" style='font-weight:300; text-align:left!important;' >Message: {{ props.item.message }}</td>
									<td width="10%" class="text-xs-left" style='font-weight:300;'>Work Started: <br>{{ props.item.began }}</td>
									<td width="10%" class="text-xs-left" style='font-weight:300;'>Work Ended: <br>{{ props.item.ended }}</td>
									<td @click="viewImage(props.item)" width="10%" class="text-xs-left" style='font-weight:300;'>Receipts:<br><a>{{ props.item.receipt }}</a></td>
									<td v-if="props.item.type == 'hour'" width="15%" class="text-xs-left" style='font-weight:300;'>{{ props.item.hours == 0 ? "&#60;1" : props.item.hours }} hour(s) at ${{ props.item.wage }} per hour + additional expenses</td>
									<td v-if="props.item.type == 'per'" width="15%" class="text-xs-left" style='font-weight:300;'>${{ props.item.wage }} + additional expenses</td>
									<td width="15%" class="text-xs-left" style='font-weight:300;'>{{ props.item.tracking }}</td>
									<td width="15%" class="text-xs-left" style='font-weight:300;'></td>
								</tr>
								</template>
							</v-data-table>
						</template>
					</v-data-table>
				</div>
			</v-app>
		</div>
		<script  src="js/orders.js"></script>
		</div>
		<footer class="footer">

                      
                      <ul class="footer__nav">
                        <li class="nav__item">
                          <h12 class="nav__title">Contact</h12>
                        
                        <address style="margin-top: -2px;">
                          +1 (425) 412-7423<br>
                              
                          <a class="footer__btn" href="mailto:support@helphog.com">Email Us</a>
                        </address>
                        </li>
                        <li class="nav__item">
                          <h12 class="nav__title">Discover</h12>
                    
                          <ul class="nav__ul">
                            <li>
                              <a href="https://helphog.com/signin?redirect=quickapply">Become a Provider</a>
                            </li>
                    
                            <li>
                              <a href="https://helphog.com/signin">Login</a>
                            </li>
                                
                            <li>
                              <a href="https://helphog.com/about">About Us</a>
                            </li>
                          </ul>
                        </li>
                        
                        <li class="nav__item nav__item--extra">
                          <h12 class="nav__title">Services</h12>
                          
                          <ul class="nav__ul nav__ul--extra">
                            <!--<li>-->
                            <!--  <a href="#">Automotive</a>-->
                            <!--</li>-->
                            
                            <!--<li>-->
                            <!--  <a href="#">Creative</a>-->
                            <!--</li>-->
                            
                            <!--<li>-->
                            <!--  <a href="#">Education</a>-->
                            <!--</li>-->
                            
                            <!--<li>-->
                            <!--  <a href="#">Household</a>-->
                            <!--</li>-->
                            
                            <!--<li>-->
                            <!--  <a href="#">Labor</a>-->
                            <!--</li>-->
                            
                            <!--<li>-->
                            <!--  <a href="#">Tech</a>-->
                            <!--</li>-->
                          </ul>
                        </li>
                        
                        <li class="nav__item">
                          <h12 class="nav__title">Legal</h12>
                          
                          <ul class="nav__ul">
                            <li>
                              <a href="#">Privacy Policy</a>
                            </li>
                            
                            <li>
                              <a href="#">Terms of Use</a>
                            </li>
                            
                            <li>
                              <a href="#">Sitemap</a>
                            </li>
                          </ul>
                        </li>
                      </ul>
                      
                      <div class="legal">
                        <p>&copy; 2020 HelpHog LLC. All rights reserved.</p>
                        
                      </div>
                </footer>
	</body>
</html>